import{_ as e,c as t,o,O as a}from"./chunks/framework.8e4cc2b6.js";const r="/images/blog/tutorial-reuse-reservation/resource-management.png",s="/images/blog/tutorial-reuse-reservation/add-building.png",n="/images/blog/tutorial-reuse-reservation/add-resource.png",l="/images/blog/tutorial-reuse-reservation/resources-example.png",i="/images/blog/tutorial-reuse-reservation/add-event.png",c="/images/blog/tutorial-reuse-reservation/browse-resources.png",u="/images/blog/tutorial-reuse-reservation/tick-resources.png",d="/images/blog/tutorial-reuse-reservation/click-resoure.png",p="/images/blog/tutorial-reuse-reservation/check-timezone.png",h="/images/blog/tutorial-reuse-reservation/calendar-example.png",g="/images/blog/tutorial-reuse-reservation/example-conversation.png",m="/images/blog/tutorial-reuse-reservation/example-reservation.png",b="/images/blog/tutorial-reuse-reservation/message-process.png",x=JSON.parse('{"title":"How to reuse reservation module to build chatbot","description":["Reuse table reservation module to build a chatbot"],"frontmatter":{"article":true,"date":"2023-04-02T00:00:00.000Z","image":["blog/banner/tutorial_reservation_chatbot.png"],"description":["Reuse table reservation module to build a chatbot"],"author":"Sunny May"},"headers":[],"relativePath":"articles/reuse-reservation-module.md","lastUpdated":1682385998000}'),y={name:"articles/reuse-reservation-module.md"},v=a(`<h1 id="how-to-reuse-reservation-module-to-build-chatbot" tabindex="-1">How to reuse reservation module to build chatbot <a class="header-anchor" href="#how-to-reuse-reservation-module-to-build-chatbot" aria-label="Permalink to &quot;How to reuse reservation module to build chatbot&quot;">​</a></h1><p>This guide shows you how to build a table reservation chatbot by reusing a module. A module is a reusable CUI (Conversational User Interface) unit whose conversational behavior is defined against some service APIs. There are two kinds of module, base module, which come with their own service APIs, and composite modules, which need to import other modules to deliver a complex conversational experience. Notice that a base module can have one or more providers that provide the implementations of the service APIs defined in that module.</p><p>By importing the right module, you can quickly add new functionality to your chatbot. In this guide, we demonstrate how you can add table reservation to your restaurant chatbot using the <a href="https://build.opencui.io/org/me.restaurant/agent/tableReservation/struct/type" target="_blank" rel="noreferrer">table reservation module</a>. The table reservation module relies on a base module called the <a href="./../reference/plugins/services/reservation/reservation-api.html">reservation API</a>, which currently has a <a href="./../reference/plugins/services/reservation/google-calendar-reservation.html">Google Calendar based provider</a>.</p><p>The resulting chatbot can help users make, view, and cancel table reservations. Here is an example dialogue to show how the chatbot works:</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">User: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hi, I&#39;d like to reserve a table, please.</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">Chatbot: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">How many people will you need the reservation for?</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">User: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">There will be two of us.</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">Chatbot: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Which day will you be joining us on?</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">User: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">This Sunday.</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">Chatbot: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">What time would you like the reservation for?</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">User: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">About 3pm.</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">Chatbot: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Are you sure to book a table for 2 at 3:00 PM on Sunday, December 25, 2022?</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">User: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Yes.</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">Chatbot: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Your reservation has been made. We&#39;ll see you at 3:00 PM on Sunday, December 25, 2022. You can check the reservation under your ID: xxxx.</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><p>The detailed CUI design for table reservation can be found <a href="./../articles/reservation-cui-design.html">here</a>.</p><p>It only takes a few steps to add table reservation functionality to a chatbot:</p><ol><li><strong>Set up</strong> resources in Google platform (where &quot;resource&quot; refers to the booked table).</li><li><strong>Import</strong> a table reservation module to your chatbot.</li><li><strong>Set up</strong> the provider in your chatbot to access to your resources.</li></ol><h2 id="before-you-start" tabindex="-1">Before you start <a class="header-anchor" href="#before-you-start" aria-label="Permalink to &quot;Before you start&quot;">​</a></h2><ol><li><a href="./../guide/signingup.html#sign-up">Sign up</a> for an account and log in to <a href="https://build.opencui.io/login" target="_blank" rel="noreferrer">OpenCUI</a>.</li><li>We assume that you are already familiar with the procedures on the platform. If not, we recommend that you read the <a href="./../guide/">Quickstart guide</a> first.</li><li>Set up <a href="./../reference/plugins/services/reservation/google-calendar-reservation.html#set-up-google-workspace">Google Workspace</a> and <a href="./../reference/plugins/services/reservation/google-calendar-reservation.html#set-up-service-account">service account</a>.</li></ol><h2 id="set-up-resources" tabindex="-1">Set up resources <a class="header-anchor" href="#set-up-resources" aria-label="Permalink to &quot;Set up resources&quot;">​</a></h2><p>Under the design of reservation API, resources are the entities that users can book or reserve, such as tables in a restaurant or appointments with a hairdresser. Before users can book a table, you need to prepare your table resources first. Different providers have different ways of defining what resources are available for booking. Since we are using <a href="./../reference/plugins/services/reservation/google-calendar-reservation.html">Google Calendar based provider</a>, we will use Google Admin console to define table resources and Google Calendar to store reservations.</p><p>To set up your table resources, follow these two steps:</p><ol><li>In the <strong>Google Admin console</strong>, add buildings and resources to make them available for users to book when making reservations through the chatbot.</li><li>In the <strong>Google Calendar</strong>, set your business hours by adding block time when users cannot book tables (e.g., when you are not open).</li></ol><p>We will use the following business information as an example to show you how to set up your resources.</p><ol><li><strong>Restaurant name</strong>: My First Restaurant</li><li><strong>Timezone</strong>: America/Los_Angeles</li><li><strong>Business hours</strong><ul><li>Monday: Closed</li><li>Tuesday to Sunday: 11:00 AM - 10:00 PM</li></ul></li><li><strong>Bookable resources</strong></li></ol><table><thead><tr><th style="text-align:left;">Resource name</th><th style="text-align:left;">Resource type</th><th style="text-align:left;">Capacity</th><th style="text-align:left;">Duration</th></tr></thead><tbody><tr><td style="text-align:left;">Small table</td><td style="text-align:left;">table</td><td style="text-align:left;">2 guests</td><td style="text-align:left;">2 hours</td></tr><tr><td style="text-align:left;">Medium table</td><td style="text-align:left;">table</td><td style="text-align:left;">4 guests</td><td style="text-align:left;">2 hours</td></tr><tr><td style="text-align:left;">Large table</td><td style="text-align:left;">table</td><td style="text-align:left;">8 guests</td><td style="text-align:left;">2 hours</td></tr></tbody></table><h3 id="add-resources-in-admin-console" tabindex="-1">Add resources in Admin console <a class="header-anchor" href="#add-resources-in-admin-console" aria-label="Permalink to &quot;Add resources in Admin console&quot;">​</a></h3><p>In order to add resources, it is important to specify the building they belong to. Once a building has been added, you can go ahead and add the desired resources.</p><p>Before you start, make sure you sign in to your <a href="https://admin.google.com/" target="_blank" rel="noreferrer">Google Admin console</a>.</p><h4 id="add-a-building" tabindex="-1">Add a building <a class="header-anchor" href="#add-a-building" aria-label="Permalink to &quot;Add a building&quot;">​</a></h4><ol><li><p>To go the Buildings section:</p><ol><li>From the <strong>Main Menu</strong> in the Google Admin console, select <strong>Directory</strong> &gt; <strong>Buildings and resources</strong> &gt; <strong>Manage resources</strong>.</li><li>Click <strong>ADD BUILDING</strong>.</li></ol><p><img src="`+r+'" alt="resource management"></p></li><li><p>To add a building:</p><ol><li>In the Buildings section, click <strong>Add building</strong>.</li><li>Fill in the form with the following information: <ul><li><strong>Id</strong>: 1</li><li><strong>Name</strong>: My First Restaurant</li><li><strong>Description</strong>: <code>{&quot;timezone&quot;: &quot;America/Los_Angeles&quot;}</code></li><li><strong>Floors</strong>: 1</li></ul></li><li>Click <strong>ADD BUILDING</strong>.</li><li>Switch back to <strong>Resources</strong>.</li></ol><p><img src="'+s+'" alt="add building"></p></li></ol><h4 id="add-resources" tabindex="-1">Add resources <a class="header-anchor" href="#add-resources" aria-label="Permalink to &quot;Add resources&quot;">​</a></h4><ol><li><p>To add the first resource in the <a href="#set-up-resources">business information</a> :</p><ol><li>In the Resources section, click <strong>Add new resource</strong>.</li><li>Fill in the form with the following information: <ul><li><strong>Category</strong>: Other resource</li><li><strong>Type</strong>: table</li><li><strong>Building</strong>: My First Restaurant</li><li><strong>Resource name</strong>: Small table</li><li><strong>Description (internal)</strong>: <code>{&quot;@class&quot;:&quot;me.restaurant.tableReservation.Table&quot;, &quot;durations&quot;: [3600], &quot;capacity&quot;: 2}</code></li></ul></li><li>Click <strong>ADD RESOURCE</strong>.</li></ol><p><img src="'+n+'" alt="add resource"></p></li><li><p>To add the other two resources, repeat the same steps but change each value in the <strong>Description</strong> field.</p><ul><li>For the medium table: <code>{&quot;@class&quot;:&quot;me.restaurant.tableReservation.Table&quot;, &quot;durations&quot;: [3600], &quot;capacity&quot;: 4}</code></li><li>For the large table: <code>{&quot;@class&quot;:&quot;me.restaurant.tableReservation.Table&quot;, &quot;durations&quot;: [3600], &quot;capacity&quot;: 8}</code></li></ul></li></ol><p>After completing these steps, your building and resources should look like the screenshot below.</p><p><img src="'+l+'" alt="resources example"></p><h3 id="block-time-in-google-calendar" tabindex="-1">Block time in Google Calendar <a class="header-anchor" href="#block-time-in-google-calendar" aria-label="Permalink to &quot;Block time in Google Calendar&quot;">​</a></h3><p>In order to avoid users making reservations when the restaurant is closed, you should block off any times outside of its opening hours. To do this, follow these three steps, using the business hours mentioned in the <a href="#set-up-resources">business information</a> as an example:</p><ol><li>Add events in your primary calendar to block time.</li><li>Add resource calendars to your calendar so you can manage events in those calendars.</li><li>Respond to event invitations in thos calendars to confirm that the time slots are blocked off.</li></ol><p>Before you start, make sure you are an <a href="https://support.google.com/a/answer/172176?hl=en" target="_blank" rel="noreferrer">admin</a> first, then sign in to your <a href="https://calendar.google.com" target="_blank" rel="noreferrer">Google Calendar</a>.</p><h4 id="add-events-to-block-time" tabindex="-1">Add events to block time <a class="header-anchor" href="#add-events-to-block-time" aria-label="Permalink to &quot;Add events to block time&quot;">​</a></h4><ol><li><p>In your primary calendar, double-click the schedule.</p></li><li><p>Specify the event details below and click <strong>Save</strong>:</p><ul><li><strong>Title</strong>: Closed</li><li><strong>Time</strong>: <code>12:00am</code> to <code>11:00am</code> (Select appropriate start and end dates based on the current date.)</li><li><strong>Repeat</strong>: Weekly on Sunday, Tuesday, Wednesday, Thursday, Friday, Saturday</li><li><strong>Rooms</strong>: <ul><li>(table)-My First Restaurant-1-Large table</li><li>(table)-My First Restaurant-1-Medium table</li><li>(table)-My First Restaurant-1-Small table</li></ul></li></ul><p><img src="'+i+'" alt="add event"></p></li><li><p>Repeat step 6 to create additional events with the following details, then adjust the <strong>time</strong> and <strong>Repeat</strong> fields as needed:</p><ul><li>Event 2 <ul><li><strong>Time</strong>: <code>10:00pm</code> to <code>11:59am</code> (Select appropriate start and end dates based on the current date.)</li><li><strong>Repeat</strong>: Weekly on Sunday, Tuesday, Wednesday, Thursday, Friday, Saturday</li></ul></li><li>Event 3 <ul><li><strong>Time</strong>: Select appropriate start and end dates based on the current date. (e.g., <code>Mar 6, 2023</code> to <code>Mar 6, 2023</code>)</li><li><strong>Repeat</strong>: Weekly on Monday</li></ul></li></ul></li></ol><h4 id="add-resources-calendar" tabindex="-1">Add resources calendar <a class="header-anchor" href="#add-resources-calendar" aria-label="Permalink to &quot;Add resources calendar&quot;">​</a></h4><ol><li><p>On Other calendars, click <strong>+</strong> &gt; <strong>Browse resources</strong>. If you don&#39;t see this option, wait a few hours for ACL changes to take effect before managing resources.</p><p><img src="'+c+'" alt="browse resources"></p></li><li><p>Tick the table resources you need.</p><p><img src="'+u+'" alt="tick resources"></p></li><li><p>Back to your calendars, choose one resource calendar, and click <strong>Settings and sharing</strong>.</p><p><img src="'+d+'" alt="click resoure"></p></li><li><p>Ensure the resource calendar&#39;s timezone matches its location to avoid scheduling errors.</p><p><img src="'+p+'" alt="check timezone"></p></li><li><p>Repeat steps 3-4 to check the timezone of the other two resource calendars.</p></li></ol><h4 id="respond-to-event-invitations" tabindex="-1">Respond to event invitations <a class="header-anchor" href="#respond-to-event-invitations" aria-label="Permalink to &quot;Respond to event invitations&quot;">​</a></h4><ol><li>Open each resource calendar and locate the three events that you added.</li><li>At the bottom of each event, select <strong>Yes</strong> as a response for all recurring events.</li></ol><p>After completing these steps, your resource calendars should resemble the example below.</p><p><img src="'+h+'" alt="calendar example"></p><h2 id="import-the-module" tabindex="-1">Import the module <a class="header-anchor" href="#import-the-module" aria-label="Permalink to &quot;Import the module&quot;">​</a></h2><p>Now it&#39;s time to create a table reservation chatbot and reuse the table reservation module.</p><ol><li>Create a chatbot and add the <strong>English(en)</strong> language.</li><li><a href="./../reference/platform/reusability.html#import-1">Import</a> the <a href="https://build.opencui.io/org/me.restaurant/agent/tableReservation/struct/type" target="_blank" rel="noreferrer">table reservation module</a> into your chatbot.</li></ol><h2 id="wire-the-provider" tabindex="-1">Wire the provider <a class="header-anchor" href="#wire-the-provider" aria-label="Permalink to &quot;Wire the provider&quot;">​</a></h2><p>Before you can use the functionality provided by the reservation API, you should declare a reservation service first, then wire the reservation provider to the service.</p><p>To wire the reservation provider:</p><ol><li>Enter the chatbot you just created.</li><li>In the navigation bar, select the <strong>Settings</strong> tab and head to <strong>Integrations</strong> page. In the <strong>Debug service provider</strong> section: <ul><li>Click <strong>Select service</strong> and select <code>services.opencui.reservation.IReservation</code>.</li><li>Follow <a href="./../reference/plugins/services/reservation/google-calendar-reservation.html#set-up-google-calendar-reservation-provider">set up Google calendar reservation provider</a> to complete this integration.</li></ul></li></ol><h2 id="test-a-chatbot" tabindex="-1">Test a chatbot <a class="header-anchor" href="#test-a-chatbot" aria-label="Permalink to &quot;Test a chatbot&quot;">​</a></h2><p>Finally, you can try to use your chatbot to make a table reservation. To test the chatbot:</p><ol><li><p>Use <a href="./../reference/platform/testing.html#debug">Debug</a> to send &quot;<em>I want to book a table</em>&quot; to start making a reservation. Then provide the number of guests, date and time. If there is an available table, you can book it successfully. For example:</p><p><img src="'+g+'" alt="example conversation"></p></li><li><p>Once you&#39;ve made a reservation, you can go to your Google Calendar and check that reservation. Here is the reservation made by the above example:</p><p><img src="'+m+'" alt="example reservation"></p></li></ol><p>The picture below shows how the reservation is made.</p><p><img src="'+b+'" alt="message process"></p><p>:🎉: Well done! You&#39;ve built up a table reservation chatbot. To explore more use cases, you can check the <a href="./../reference/platform/testing.html#test-cases">Test cases</a> in the <a href="https://build.opencui.io/org/me.restaurant/agent/tableReservationApp/en/type?page=0&amp;imported=false&amp;search=&amp;category=ALL" target="_blank" rel="noreferrer">tableReservationApp</a> chatbot.</p>',51),f=[v];function k(D,q,w,A,_,C){return o(),t("div",null,f)}const T=e(y,[["render",k]]);export{x as __pageData,T as default};
