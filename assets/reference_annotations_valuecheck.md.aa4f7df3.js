import{_ as o,c as t,z as e,G as n,O as a,a as l,D as r,o as i}from"./chunks/framework.8e4cc2b6.js";const c="/images/annotation/valuecheck/value-check.png",p="/images/annotation/valuecheck/slots-order.png",F=JSON.parse('{"title":"Value check","description":"","frontmatter":{},"headers":[],"relativePath":"reference/annotations/valuecheck.md","lastUpdated":1682392529000}'),h={name:"reference/annotations/valuecheck.md"},u=a(`<h1 id="value-check" tabindex="-1">Value check <a class="header-anchor" href="#value-check" aria-label="Permalink to &quot;Value check&quot;">​</a></h1><p>Not all user requests can be accommodated based on business logic. For instance, when a user requests to book a table for dinner, their initial date preference may not be valid if the business is closed on that day. In such cases, the bot should inform the user of the closure and save their time by not asking for party size and time.</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">User: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">I want to book a table this Friday.</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">Chatbot: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Sorry, we are not open on Friday. Please choose another date.</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>Capturing invalid user input based on business logic is essential to make conversations effective. With value checks, builders can define what constitutes invalid input based on the service and have the bot offer users the chance to provide alternative choices.</p><p>Use value checks to verify whether the option entered by the user is servable based on the business logic. When the value check fails, you can specify the recovery process:</p><ul><li>Decide how the bot informs users that the input value is invalid</li><li>Choose which slot should be cleared so that we can restart the slot-filling process from that point again.</li></ul><h2 id="how-to-use" tabindex="-1">How to use <a class="header-anchor" href="#how-to-use" aria-label="Permalink to &quot;How to use&quot;">​</a></h2><p>Value check is an optional slot level annotation. When conversation moves to the value check stage, the dialog manager checks the conditions defined in the value check.</p><ul><li>If all conditions are true, the value check passes, and slot filling moves on to the next stage.</li><li>If any of the conditions are false, the value check fails. When the value check fails, the bot uses value check prompts to inform users that the value is invalid. The bot then clears the predefined target slot first and restarts the conversation from that slot again.</li></ul><p><img src="`+c+'" alt="value check"></p><h3 id="conditions" tabindex="-1">Conditions <a class="header-anchor" href="#conditions" aria-label="Permalink to &quot;Conditions&quot;">​</a></h3><p>The condition holds the boolean code expression that checks whether the value entered by the user is servable by the business. If all conditions are true, the value check passes, and slot filling proceeds to the next stage. If any of the conditions are false, the value check fails.</p><p>Conditions are defined in <a href="./kotlinexpression.html">kotlin code expression</a>, which should produce a Boolean value when evaluated, like <code>slot != null</code> , <code>function() == true</code> . You can combine the statements using logical operator such as <code>&amp;&amp;</code> or <code>||</code> , like <code>slot != null &amp;&amp; slot &lt; 3</code> .</p><h3 id="inform" tabindex="-1">Inform <a class="header-anchor" href="#inform" aria-label="Permalink to &quot;Inform&quot;">​</a></h3><p>When the value check fails, the bot informs users that the value is invalid.</p><h3 id="recovering-strategy" tabindex="-1">Recovering strategy <a class="header-anchor" href="#recovering-strategy" aria-label="Permalink to &quot;Recovering strategy&quot;">​</a></h3><p>If the value check fails, you can decide which slot to clear in the recovering strategy. The bot will then start from that slot and try to obtain the user&#39;s choice for each subsequent slot one by one again. For example, if the user&#39;s choice causes the value check to fail when all slots (party size, date, and time) have been filled, you can choose to clear the current slot&#39;s value only (which is the default) or clear an earlier slot and restart the conversation from that point again.</p><p>Suppose the order of the slots is as follows. Here are two different scenarios that use different recovering strategies.</p><p><img src="'+p+'" alt="order of slots"></p>',20),d=e("strong",null,"Case 1 - Clear the input value of current slot",-1),v=l(),y=a(`<div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">User: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Can I book a table for 2 this Friday?</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">Chatbot: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">What time would you like to book?</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">User: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">5:00 pm.</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">Chatbot: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Sorry, small table at 5 pm on Friday is not available. </span></span>
<span class="line"><span style="color:#C3E88D;">          Please choose another time.</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><p><strong>Case 2 - Keep the input value of current slot and clear another slot</strong></p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">User: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Can I reserve a table for two this Friday?</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">Chatbot: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">What time would you like to book?</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">User: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">5:00 pm.</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">Chatbot: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Sorry, small table at 5 pm on Friday is not available. </span></span>
<span class="line"><span style="color:#C3E88D;">          Please choose another date.</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div>`,3);function f(m,b,D,C,g,k){const s=r("Badge");return i(),t("div",null,[u,e("p",null,[d,v,n(s,{text:"Default",vertical:"middle"})]),y])}const q=o(h,[["render",f]]);export{F as __pageData,q as default};
