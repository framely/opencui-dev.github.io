<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Build a simple module | OpenCUI</title>
    <meta name="description" content="前端技术文档">
    <link rel="preload stylesheet" href="/assets/style.c8010e58.css" as="style">
    <script type="module" src="/assets/app.6f53b012.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/assets/chunks/framework.8e4cc2b6.js">
  <link rel="modulepreload" href="/assets/chunks/theme.178d60bc.js">
  <link rel="modulepreload" href="/assets/guide_build-module.md.800c873b.lean.js">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-b2cf3e0b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8616af1></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8616af1> Skip to content </a><!--]--><!----><header class="VPNav" data-v-b2cf3e0b data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-94c81dcc><div class="container" data-v-94c81dcc><div class="title" data-v-94c81dcc><div class="VPNavBarTitle has-sidebar" data-v-94c81dcc data-v-f4ef19a3><a class="title" href="/" data-v-f4ef19a3><!--[--><!--]--><!--[--><img class="VPImage logo" src="/images/logo.png" alt data-v-6db2186b><!--]--><!--[-->OpenCUI<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-94c81dcc><div class="curtain" data-v-94c81dcc></div><div class="content-body" data-v-94c81dcc><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-94c81dcc><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-94c81dcc data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/essentials/README.html" tabindex="0" data-v-7f418b0f data-v-37adc828 data-v-8f4dc553><!--[-->Why OpenCUI<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/guide/" tabindex="0" data-v-7f418b0f data-v-37adc828 data-v-8f4dc553><!--[-->Quickstart<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/reference/annotations/overview.html" tabindex="0" data-v-7f418b0f data-v-37adc828 data-v-8f4dc553><!--[-->Reference<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pricing/README.html" tabindex="0" data-v-7f418b0f data-v-37adc828 data-v-8f4dc553><!--[-->Pricing<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/articles/" tabindex="0" data-v-7f418b0f data-v-37adc828 data-v-8f4dc553><!--[-->Blog<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://build.opencui.io" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-37adc828 data-v-8f4dc553><!--[-->Start to build<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-8f4dc553><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-94c81dcc data-v-f6a63727><label title="toggle dark mode" data-v-f6a63727 data-v-a9c8afb8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-a9c8afb8 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a9c8afb8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a9c8afb8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><!----><div class="VPFlyout VPNavBarExtra extra" ref_key="el" data-v-94c81dcc data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><label title="toggle dark mode" data-v-40855f84 data-v-a9c8afb8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-a9c8afb8 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a9c8afb8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a9c8afb8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-94c81dcc data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-b2cf3e0b data-v-59bd7401><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-59bd7401><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-59bd7401><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-59bd7401>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-59bd7401 data-v-079b16a8><button data-v-079b16a8>Return to top</button><!----></div></div><aside class="VPSidebar" ref_key="navEl" data-v-b2cf3e0b data-v-af16598e><div class="curtain" data-v-af16598e></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-af16598e><span class="visually-hidden" id="sidebar-aria-label" data-v-af16598e> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-af16598e><section class="VPSidebarItem level-0 has-active" data-v-af16598e data-v-c4656e6d><div class="item" role="button" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><h2 class="text" data-v-c4656e6d>Quickstart</h2><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/guide/signingup.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Sign up</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/guide/clone-simple-chatbot.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Clone a simple chatbot</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/guide/build-simple-chatbot.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Build a simple chatbot</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/guide/reuse-component.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Reuse a simple module</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/guide/build-module.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Build a simple module</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/guide/build-provider.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Build a simple provider</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/guide/deploy-to-channel.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Deploy a chatbot</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/guide/opencui-flow.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>OpenCUI workflow</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/guide/concepts.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Key concepts</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-b2cf3e0b data-v-a494bd1d><div class="VPDoc has-sidebar has-aside" data-v-a494bd1d data-v-c4b0d3cf><!--[--><!--]--><div class="container" data-v-c4b0d3cf><div class="aside" data-v-c4b0d3cf><div class="aside-curtain" data-v-c4b0d3cf></div><div class="aside-container" data-v-c4b0d3cf><div class="aside-content" data-v-c4b0d3cf><div class="VPDocAside" data-v-c4b0d3cf data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" ref_key="container" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-9a431c33><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c4b0d3cf><div class="content-container" data-v-c4b0d3cf><!--[--><!--]--><!----><main class="main" data-v-c4b0d3cf><div style="position:relative;" class="vp-doc _guide_build-module" data-v-c4b0d3cf><div><h1 id="build-a-simple-module" tabindex="-1">Build a simple module <a class="header-anchor" href="#build-a-simple-module" aria-label="Permalink to &quot;Build a simple module&quot;">​</a></h1><p>On OpenCUI, a module is reusable conversational functionality. While it is possible for a module to be self-contained, modules are commonly just frontends that conversationally expose a single service, with the actual implementation of the service developed and deployed separately. Using services to decouple the frontend and backend development has many benefits and is widely adopted for building user-facing applications.</p><p>The Service is a special singleton type in a module with service enabled. It allows you to declare a set of API functions that can be directly accessed by other types. With the service declared, you can define the conversational user interface to expose these functionalities in the same module. Such a module, when paired with a compatible provider, can add conversational functionality to any chatbot with little effort.</p><p>In the previous guide, we showed how your chatbot can handle various business hours queries using the &quot;hours&quot; module. In this guide, we will show you how to build such a module in two parts: first declare the service, then define the conversational user interface on top of that. Both essentially involve defining a set of types, with types needed by the service requiring no dialog annotations.</p><h2 id="before-you-start" tabindex="-1">Before you start <a class="header-anchor" href="#before-you-start" aria-label="Permalink to &quot;Before you start&quot;">​</a></h2><ul><li><a href="./signingup.html#sign-up">Sign up</a> for an account and log in to <a href="https://build.opencui.io/login" target="_blank" rel="noreferrer">OpenCUI</a>.</li><li><a href="./build-simple-chatbot.html">Build a simple chatbot</a> for how to build a skill with entity slots.</li><li><a href="./reuse-component.html">Reuse a full-stack component</a> to get familiar with the functionality you will build here.</li></ul><h2 id="create-module-hours" tabindex="-1">Create module: hours <a class="header-anchor" href="#create-module-hours" aria-label="Permalink to &quot;Create module: hours&quot;">​</a></h2><p>A module with service support allows you to focus on creating the conversational user interface, leaving the management of business information, like hours, as a separate concern.</p><p>To create a module with service support, follow these steps:</p><ol><li>Within an organization, go to the project list page, click <strong>Create</strong> and select <strong>Create module</strong>.</li><li>In the pop-up window, complete the form for module basic settings and click <strong>Create</strong>: <ul><li><strong>Project label</strong>: The unique identifier for the module. We suggest using a lowercase label. For example, <code>hours</code>.</li><li><strong>Languages</strong>: The languages your module supports, you can add multiple languages. In this case, select <strong>English(en)</strong>.</li><li><strong>Enable service interface</strong>: Enable service interface to define a service interface in a module that can be used by the module to interact with the backend.</li></ul></li></ol><h2 id="declare-service" tabindex="-1">Declare service <a class="header-anchor" href="#declare-service" aria-label="Permalink to &quot;Declare service&quot;">​</a></h2><p>Declaring a service means that you declare the function type for each API in the service, which include function label, its input parameters and return. Clearly, you must first declare the data types for their input parameters and return values, which may need to be done recursively in case one of these data types is composite.</p><p>In this case, a <code>hours</code> service provides information about the business hours of a specific business, typically consists of the following:</p><ul><li>A data type <code>BusinessHours</code> to represent the business hours on a specific day.</li><li>A function <code>getHoursWeek</code> to get the hours for the week.</li><li>A function <code>getHoursDay</code> to return business hour for the specific date.</li></ul><p>The <code>getHoursWeek</code> and <code>getHoursDay</code> functions can also be merged into one function. However, for the demo, we keep them separated to make the code more modular and easier to understand.</p><p>Here are the steps on how to declare the <code>hours</code> service in OpenCUI.</p><h3 id="build-frame-businesshours" tabindex="-1">Build frame: BusinessHours <a class="header-anchor" href="#build-frame-businesshours" aria-label="Permalink to &quot;Build frame: BusinessHours&quot;">​</a></h3><p>To return the business hours on a specific day, you&#39;ll need a data type contains the following information:</p><ul><li><strong>dayOfWeek</strong>: The day of the week, like &quot;Monday&quot;, &quot;Tuesday&quot;, etc.</li><li><strong>ifOpen</strong>: Whether it&#39;s open on that day.</li><li><strong>openingTime</strong>: The time it opens.</li><li><strong>closingTime</strong>: The time it closes.</li></ul><p>You will define a &quot;BusinessHours&quot; frame for this purpose since a OpenCUI frame is an user defined composite type.</p><h4 id="schema-layer-declare-a-frame" tabindex="-1">Schema layer: declare a frame <a class="header-anchor" href="#schema-layer-declare-a-frame" aria-label="Permalink to &quot;Schema layer: declare a frame&quot;">​</a></h4><p>At this layer, you will create a frame and add all of the necessary slots.</p><h5 id="create-the-frame" tabindex="-1">Create the frame <a class="header-anchor" href="#create-the-frame" aria-label="Permalink to &quot;Create the frame&quot;">​</a></h5><p>Inside the <code>hours</code> module and <strong>Types</strong> page, under the <strong>Structure</strong> view.</p><ol><li>Click <strong>Create</strong> button on the right side, and select <strong>Create frame</strong> to create a new frame.</li><li>Enter <code>BusinessHours</code> as a label for the frame type and press enter.</li></ol><h5 id="add-slots" tabindex="-1">Add slots <a class="header-anchor" href="#add-slots" aria-label="Permalink to &quot;Add slots&quot;">​</a></h5><p>Inside the <code>BusinessHours</code> frame and <strong>Schema</strong> tab, under the <strong>Structure</strong> view.</p><ol><li>In the <strong>Slots</strong> section, select type <strong>Entity</strong> &gt; <strong>java.time.DayOfWeek</strong> with the label <code>dayOfWeek</code>.</li><li>Back to the <code>BusinessHours</code> schema page, repeat the first step to add the following slots: <ul><li>Type <strong>kotlin.Boolean</strong> with the label <code>ifOpen</code>.</li><li>Type <strong>java.time.LocalTime</strong> with the label <code>openingTime</code>.</li><li>Type <strong>java.time.LocalTime</strong> with the label <code>closingTime</code>.</li></ul></li></ol><p>Once finished, the frame should look like this:</p><p><img src="/images/guide/build-service/show-frame.png" alt="show frame BusinessHours"></p><h4 id="annotate-type-businesshours" tabindex="-1">Annotate type: BusinessHours <a class="header-anchor" href="#annotate-type-businesshours" aria-label="Permalink to &quot;Annotate type: BusinessHours&quot;">​</a></h4><p>Since this type does not need to be exposed conversationally, there is no need to add dialog annotation.</p><h3 id="declare-function-gethoursweek" tabindex="-1">Declare function: getHoursWeek <a class="header-anchor" href="#declare-function-gethoursweek" aria-label="Permalink to &quot;Declare function: getHoursWeek&quot;">​</a></h3><p>The function <code>getHoursWeek</code> gets the hours for the week. It returns a list of <code>BusinessHours</code>, where each represents the business hours for a specific day. To declare this function interface:</p><p>Inside the <code>hours</code> module and <strong>Service</strong> page, under the <strong>Structure</strong> view.</p><ol><li>In the <strong>Functions</strong> section, click <strong>Add</strong>.</li><li>Enter <code>getHoursWeek</code> as the <strong>Function label</strong>.</li><li>In the <strong>Return type</strong> section, select <strong>Frame</strong> &gt; <strong>BusinessHours</strong> as <strong>Type</strong>. Turn on <strong>Multi-value</strong>d and turn off <strong>Nullable</strong>, then save.</li></ol><h3 id="declare-function-gethoursday" tabindex="-1">Declare function: getHoursDay <a class="header-anchor" href="#declare-function-gethoursday" aria-label="Permalink to &quot;Declare function: getHoursDay&quot;">​</a></h3><p>The function <code>getHoursDay</code> returns business hour based on the specific date provided by customers. It takes a date as input and returns one <code>BusinessHours</code>, where the frame represents the business hours for the specified day. To declare this function interface:</p><p>Inside the <code>hours</code> module and <strong>Service</strong> page, under the <strong>Structure</strong> view.</p><ol><li>In the <strong>Functions</strong> section, click <strong>Add</strong>.</li><li>Enter <code>getHoursDay</code> as the <strong>Function label</strong>.</li><li>In the <strong>Parameters</strong> section, click <strong>+</strong> to add an input parameter. <ul><li>Enter <code>date</code> as a <strong>Name</strong>.</li><li>Select <strong>Entity</strong> &gt; <strong>java.time.LocalDate</strong> as <strong>Type</strong>.</li></ul></li><li>In the <strong>Return type</strong> section, select <strong>Frame</strong> &gt; <strong>BusinessHours</strong> as <strong>Type</strong> and turn off <strong>Nullable</strong>, then save.</li></ol><p>Once finished, the function interfaces should look like this:</p><p><img src="/images/guide/build-service/show-functions.png" alt="show functions"></p><h2 id="build-cui-for-the-service" tabindex="-1">Build CUI for the service <a class="header-anchor" href="#build-cui-for-the-service" aria-label="Permalink to &quot;Build CUI for the service&quot;">​</a></h2><p>To provide functionality through a conversational user interface (CUI), you need to define a skill. A skill is essentially a function type with dialog annotations, allowing the chatbot to create a callable object for triggering the service through conversation. The input parameters of the function are captured by the skill&#39;s slots, and the function&#39;s return can be displayed using its response.</p><p>As always, when building a type, you should first define its dependent types, but all the types required by the skill are already defined, so you are good.</p><h3 id="build-skill-showhours" tabindex="-1">Build skill: ShowHours <a class="header-anchor" href="#build-skill-showhours" aria-label="Permalink to &quot;Build skill: ShowHours&quot;">​</a></h3><p>Although there are two API functions that need to be exposed, only one skill is necessary. To determine which API functions should be grouped together, consider their simplest description without mentioning parameters or return values. If two API functions share the same description, they must be triggered by the same skill.</p><h4 id="schema-layer-declare-a-skill" tabindex="-1">Schema layer: declare a skill <a class="header-anchor" href="#schema-layer-declare-a-skill" aria-label="Permalink to &quot;Schema layer: declare a skill&quot;">​</a></h4><p>To create a skill for managing users&#39; questions on business hours, you need to create the type, add the necessary slots and services.</p><h5 id="create-the-skill" tabindex="-1">Create the skill <a class="header-anchor" href="#create-the-skill" aria-label="Permalink to &quot;Create the skill&quot;">​</a></h5><p>Inside the <code>hours</code> module and <strong>Types</strong> page, under the <strong>Structure</strong> view.</p><ol><li>Click <strong>Create</strong> button on the right side, and select <strong>Create skill</strong> to create a new skill.</li><li>Enter <code>ShowHours</code> as a label for the skill type and press enter.</li></ol><h5 id="add-slots-1" tabindex="-1">Add slots <a class="header-anchor" href="#add-slots-1" aria-label="Permalink to &quot;Add slots&quot;">​</a></h5><p>To prompt a user for a specific day, use the <a href="./../reference/plugins/components/datepicker/README.html">DatePicker</a> frame. This frame simplifies the process of entering a date and is an official CUI component declared in the <code>components</code> module.</p><p>Before proceeding, ensure that the <code>components</code> module exists under the <strong>Dependencies</strong> tab. If it doesn&#39;t, import <a href="https://build.opencui.io/org/io.opencui/agent/components/struct/frame/63c8aea6517f06c1880e3cff" target="_blank" rel="noreferrer">components module</a> to the <code>hours</code> module first. After successful import, go back to <code>hours</code> module and refresh your webpage.</p><p>Inside the <code>ShowHours</code> skill and <strong>Schema</strong> tab, under the <strong>Structure</strong> view.</p><ol><li><p>In the <strong>Slots</strong> section, add a slot of type <strong>io.opencui.components.dataEntry.DatePicker</strong> with the label <code>datePicker</code>.</p></li><li><p>To access functions, in the <strong>Services</strong> section, select <strong>IHours</strong> with the label <code>hours</code> and <strong>Save</strong>.</p><p><img src="/images/guide/build-service/add-service.png" alt="add service"></p></li></ol><h4 id="annotate-type-showhours" tabindex="-1">Annotate type: ShowHours <a class="header-anchor" href="#annotate-type-showhours" aria-label="Permalink to &quot;Annotate type: ShowHours&quot;">​</a></h4><p>Based on analysis of the desired conversational behavior and business logic, pick the right annotation to add for desired conversation experience.</p><h5 id="add-slot-level-annotation-to-datepicker" tabindex="-1">Add slot level annotation to datePicker <a class="header-anchor" href="#add-slot-level-annotation-to-datepicker" aria-label="Permalink to &quot;Add slot level annotation to datePicker&quot;">​</a></h5><p>When a user triggers a skill, the chatbot follows the interaction logic based on the annotations attached to the skill. For this particular skill, the desired conversational experience is as follows:</p><ul><li>If the user doesn&#39;t mention a specific date, the chatbot should display the business hours for the week.</li><li>If the user provides a date, and the business is open on that day, the chatbot should show the business hours. If the business is closed, the chatbot should inform the user that it&#39;s closed.</li></ul><p>To make the chatbot respond directly when the user does not mention a date, you need to set <strong>Fill strategy</strong> to <strong>Recover only</strong> for the slot.</p><h6 id="interaction-layer" tabindex="-1">Interaction layer <a class="header-anchor" href="#interaction-layer" aria-label="Permalink to &quot;Interaction layer&quot;">​</a></h6><p>Inside the <code>ShowHours/datePicker</code> slot and <strong>Annotation</strong> tab, under the <strong>Structure</strong> view.</p><ul><li>In the <strong>Fill strategy</strong> section, select <strong>Recover only</strong>.</li></ul><div class="tip custom-block"><p class="custom-block-title">Remember to propagate the change you made under the Structure view</p><ul><li>Both schema layer and interaction layer are defined under <strong>Structure</strong> view, but language layer is under corresponding language view, for example, for English, it should be under &quot;Language/en&quot;.</li><li>Before beginning work on the language layer, always <a href="./opencui-flow.html#propagate-the-changes-to-language-view">propagate</a> the changes made so far to the language layer, and then switch over to the corresponding language view.</li></ul></div><h6 id="language-layer" tabindex="-1">Language layer <a class="header-anchor" href="#language-layer" aria-label="Permalink to &quot;Language layer&quot;">​</a></h6><p>Inside the <code>ShowHours/datePicker</code> slot and <strong>Expression</strong> tab, under the <strong>Language/en</strong> view.</p><ul><li>In <strong>Names</strong> section, enter the names, such as <code>date</code>.</li></ul><h5 id="add-type-level-annotation" tabindex="-1">Add type level annotation <a class="header-anchor" href="#add-type-level-annotation" aria-label="Permalink to &quot;Add type level annotation&quot;">​</a></h5><p>For the <code>ShowHours</code> skill, only two type level annotations: names, utterance exemplars, are required.</p><h6 id="language-layer-1" tabindex="-1">Language layer <a class="header-anchor" href="#language-layer-1" aria-label="Permalink to &quot;Language layer&quot;">​</a></h6><p>Inside the <code>ShowHours</code> skill and the <strong>Expressions</strong> tab, under the <strong>Language/en</strong> view.</p><ol><li>Add names. In the <strong>Names</strong> section, enter <code>show business hours</code> and press enter.</li><li>Add expressions. In the <strong>Expressions</strong> section, enter the following content: <ul><li><em>When do you open?</em></li><li><em>Do you open $datePicker$?</em></li></ul></li></ol><div class="warning custom-block"><p class="custom-block-title">Attention</p><p>Do <strong>NOT</strong> copy and paste the value wrapped by <code>$</code>. Please type the value instead.</p></div><h4 id="configure-response" tabindex="-1">Configure response <a class="header-anchor" href="#configure-response" aria-label="Permalink to &quot;Configure response&quot;">​</a></h4><p>On OpenCUI, response comes with a default catch-all branch that has no triggering condition. You can also turn on the additional branch if you need to handle complex use cases. When branch is enabled, you can add one or more branches, each with a triggering condition and the corresponding action.</p><p>OpenCUI supports two types of actions: messages and system actions. System actions are related to dialog management, such as closing the current session. Messages are used to render some structured data into natural language.</p><p>If the data you want to render is a single item, you should use a single value message. A single value message only needs a template to demonstrate how that data item should be rendered into natural language.</p><p>If the data you want to render is a list of items, you need to use a multiple value message. Such message requires you configure a source and a template structure. The source should be a Kotlin code expression that evaluates to a list of items of some data type. The template structure consists of a header, a body, and a footer, each used for a different purpose:</p><ul><li>The header helps users quickly understand the purpose and context of the list.</li><li>The body contains the rendering of one item in the list. You can use &quot;it&quot; to reference the item itself.</li><li>The footer provides additional context or actions related to the list.</li></ul><p>When there are multiple branches, the ordering of these branches matters, OpenCUI runtime will go <strong>from top to bottom</strong>, and find the first branch with its triggering condition evaluated to true and execute its action. If no additional branch is triggered, OpenCUI will execute the actions in the default branch.</p><p>The responses for this skill depend on a number of the things: whether <code>datePicker</code> slot is filled and whether the business is open on that day. In particular, there should be three branches:</p><ul><li>If the specific date provided by the customer is closed, inform customers it closed and show the business hours for the week.</li><li>If the specific date provided by the customer is open, show the business hours for the specific date.</li><li>No specific date is provided, show the business hours for the week.</li></ul><p>Clearly, you need to enable <strong>Branches</strong>:</p><p>Inside the <code>ShowHours</code> skill and the <strong>Response</strong> tab, under the <strong>Structure</strong> view.</p><ul><li><p>Turn on <strong>Branches</strong>.</p><p><img src="/images/guide/build-service/branching.png" alt="add a branch"></p></li></ul><p>Now you can define each branch one at a time, first in interaction layer, then in language layer, once for each language you want to support. However, this guide assumes that only English is supported.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Remember to propagate the change in the structure view before you switch to language view, to make sure the annotation you can fill language part is made available.</p></div><h5 id="define-branch-openday" tabindex="-1">Define branch: OpenDay <a class="header-anchor" href="#define-branch-openday" aria-label="Permalink to &quot;Define branch: OpenDay&quot;">​</a></h5><p>To show the business hours on a user-mentioned date if it&#39;s open on that day.</p><h6 id="interaction-layer-1" tabindex="-1">Interaction layer <a class="header-anchor" href="#interaction-layer-1" aria-label="Permalink to &quot;Interaction layer&quot;">​</a></h6><p>Inside the <code>ShowHours</code> skill and the <strong>Response</strong> tab, under the <strong>Structure</strong> view.</p><p>In the <strong>Branches</strong> section, click <strong>Add</strong>:</p><ol><li>Set branch label, such as <code>OpenDay</code>.</li><li>Set <strong>Conditions</strong>:<div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// If the date you are open</span></span>
<span class="line"><span style="color:#A6ACCD;">date</span><span style="color:#FFCB6B;">Picker?</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">date </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> hours</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">getHoursDay</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">datePicker</span><span style="color:#89DDFF;">!!.</span><span style="color:#A6ACCD;">date</span><span style="color:#89DDFF;">!!).</span><span style="color:#A6ACCD;">ifOpen </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span></span></code></pre></div></li><li>Add <strong>Action sequence</strong>. In this branch, select <strong>Single value message</strong>.</li></ol><h6 id="language-layer-2" tabindex="-1">Language layer <a class="header-anchor" href="#language-layer-2" aria-label="Permalink to &quot;Language layer&quot;">​</a></h6><p>Inside the <code>OpenDay</code> branch, under the <strong>Language/en</strong> view.</p><ul><li>Configure <strong>Single value message</strong>:<div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">We</span><span style="color:#A6ACCD;"> are </span><span style="color:#C792EA;">open</span><span style="color:#A6ACCD;"> on $</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">datePicker</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">date</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">expression</span><span style="color:#89DDFF;">()}</span><span style="color:#A6ACCD;"> from $</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">hours</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">getHoursDay</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">datePicker</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">date</span><span style="color:#89DDFF;">!!).</span><span style="color:#F07178;">openingTime</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">expression</span><span style="color:#89DDFF;">()}</span><span style="color:#A6ACCD;"> to $</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">hours</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">getHoursDay</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">datePicker</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">date</span><span style="color:#89DDFF;">!!).</span><span style="color:#F07178;">closingTime</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">expression</span><span style="color:#89DDFF;">()}.</span></span></code></pre></div></li></ul><h5 id="define-branch-closedday" tabindex="-1">Define branch: ClosedDay <a class="header-anchor" href="#define-branch-closedday" aria-label="Permalink to &quot;Define branch: ClosedDay&quot;">​</a></h5><p>If you are closed on the date that users are interested in, you will first inform them that you are closed, and then list regular weekly hours.</p><p>To add this branch, repeat the steps in the previous branch, but only the key points are listed here.</p><ol><li>Set branch label, such as <code>ClosedDay</code>.</li><li>Set <strong>Conditions</strong>:<div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// If the date you are closed</span></span>
<span class="line"><span style="color:#A6ACCD;">date</span><span style="color:#FFCB6B;">Picker?</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">date </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> hours</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">getHoursDay</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">datePicker</span><span style="color:#89DDFF;">!!.</span><span style="color:#A6ACCD;">date</span><span style="color:#89DDFF;">!!).</span><span style="color:#A6ACCD;">ifOpen </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span></span></code></pre></div></li><li>Add <strong>Action sequence</strong>: <ol><li><strong>Single value message</strong>, this will inform users that your business is closed.<div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Sorry</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> we don&#39;t </span><span style="color:#C792EA;">open</span><span style="color:#A6ACCD;"> on $</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">datePicker</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">date</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">expression</span><span style="color:#89DDFF;">()}.</span></span></code></pre></div></li><li><strong>Multiple value message</strong>, this will display a list of your regular weekly hours, so the user can get additional information to make a choice.<div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//Source:</span></span>
<span class="line"><span style="color:#A6ACCD;">hours</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">getHoursWeek</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//Header: </span></span>
<span class="line"><span style="color:#FFCB6B;">Our</span><span style="color:#A6ACCD;"> business hours </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> a week are</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//Body:</span></span>
<span class="line"><span style="color:#A6ACCD;">$</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">it</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">dayOfWeek</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">expression</span><span style="color:#89DDFF;">()}</span></span>
<span class="line"><span style="color:#A6ACCD;">$</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">it</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ifOpen </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">true)</span><span style="color:#F07178;"> it</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">openingTime</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">expression</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> ⁠– </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> it</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">closingTime</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">expression</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Closed</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span></span></code></pre></div></li></ol></li></ol><h5 id="default-branch" tabindex="-1">Default branch <a class="header-anchor" href="#default-branch" aria-label="Permalink to &quot;Default branch&quot;">​</a></h5><p>If the user does not specify a date, simply respond with the business&#39;s regular weekly hours.</p><p>In the default branch, you only need to add the actions. Repeat the steps in the previous branch, but only the key points are listed here.</p><ul><li>In <strong>Default branch</strong>, add <strong>Multiple value message</strong>, this will display a list of your regular weekly hours.<div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//Source:</span></span>
<span class="line"><span style="color:#A6ACCD;">hours</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">getHoursWeek</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//Header:</span></span>
<span class="line"><span style="color:#FFCB6B;">Our</span><span style="color:#A6ACCD;"> business hours </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> a week are</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//Body:</span></span>
<span class="line"><span style="color:#A6ACCD;">$</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">it</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">dayOfWeek</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">expression</span><span style="color:#89DDFF;">()}</span></span>
<span class="line"><span style="color:#A6ACCD;">$</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">it</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ifOpen </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">true)</span><span style="color:#F07178;"> it</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">openingTime</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">expression</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> ⁠– </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> it</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">closingTime</span><span style="color:#89DDFF;">!!.</span><span style="color:#F07178;">expression</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Closed</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span></span></code></pre></div></li></ul><p>Once you have finished building a module, you can <a href="./opencui-flow.html#create-a-pull-request">create a pull request</a>, <a href="./opencui-flow.html#review-and-merge-pull-request">merge it into the master</a>. You can then go back to the chatbot you used in the previous guide, replace the module you imported with this one, and experiment with it.</p></div></div></main><footer class="VPDocFooter" data-v-c4b0d3cf data-v-face870a><!--[--><!--]--><div class="edit-info" data-v-face870a><!----><div class="last-updated" data-v-face870a><p class="VPLastUpdated" data-v-face870a data-v-7b3ebfe1>Last updated: <time datetime="2023-04-25T04:14:51.000Z" data-v-7b3ebfe1></time></p></div></div><div class="prev-next" data-v-face870a><div class="pager" data-v-face870a><a class="pager-link prev" href="/guide/reuse-component.html" data-v-face870a><span class="desc" data-v-face870a>Previous page</span><span class="title" data-v-face870a>Reuse a simple module</span></a></div><div class="has-prev pager" data-v-face870a><a class="pager-link next" href="/guide/build-provider.html" data-v-face870a><span class="desc" data-v-face870a>Next page</span><span class="title" data-v-face870a>Build a simple provider</span></a></div></div></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"guide_index.md\":\"23da6209\",\"guide_opencui-flow.md\":\"8367a901\",\"guide_reuse-component.md\":\"e987ee4b\",\"guide_signingup.md\":\"1315c5f7\",\"index.md\":\"1b29abf4\",\"policy_privacy.md\":\"0fb90305\",\"policy_terms.md\":\"fdba1082\",\"articles_build-reservation-module.md\":\"e5f84b9e\",\"reference_readme.md\":\"2d46d46d\",\"reference_annotations_confirmation.md\":\"f79bd630\",\"reference_annotations_fillstrategy.md\":\"54d3b67b\",\"reference_annotations_init.md\":\"8be938c7\",\"reference_annotations_kotlinexpression.md\":\"5fec1cff\",\"articles_chatbot-development-with-opencui.md\":\"df577479\",\"articles_index.md\":\"5c20af3e\",\"contributing.md\":\"5b744e30\",\"essentials_readme.md\":\"d9500ce3\",\"essentials_document-requirement-for-cui.md\":\"39aa9bba\",\"essentials_newformulation.md\":\"43a47680\",\"guide_3layers.md\":\"3625cbcb\",\"articles_set-up-vuepress-blog.md\":\"ea2a2ae6\",\"reference_annotations_overview.md\":\"6b8162b9\",\"guide_clone-simple-chatbot.md\":\"12ba99c0\",\"guide_build-simple-chatbot.md\":\"b8beb387\",\"articles_from-schema-to-snippets.md\":\"0418179d\",\"guide_concepts.md\":\"9cfdd3bc\",\"guide_deploy-to-channel.md\":\"e3abb219\",\"essentials_5levels-cui.md\":\"39310d52\",\"essentials_architecture.md\":\"808a0fae\",\"guide_build-module.md\":\"800c873b\",\"articles_reservation-cui-design.md\":\"fb45a8d8\",\"pricing_readme.md\":\"b61c2fc1\",\"reference_annotations_systemcomponent.md\":\"84c00559\",\"reference_annotations_templateandexemplar.md\":\"ea4ac4e8\",\"reference_annotations_transition.md\":\"89284c46\",\"reference_annotations_valuecheck.md\":\"aa4f7df3\",\"reference_annotations_valuerec.md\":\"54016f2d\",\"reference_are-you-ready.md\":\"495a9d98\",\"reference_channels_googlebusiness.md\":\"07a52f32\",\"reference_channels_messenger.md\":\"461f5bab\",\"reference_channels_overview.md\":\"0573f027\",\"reference_channels_universalmessage.md\":\"bcf87011\",\"reference_channels_whatsapp.md\":\"be42b345\",\"reference_channels_wpa.md\":\"5b461ed9\",\"reference_glossary.md\":\"fe54ee1e\",\"reference_platform_deployment.md\":\"5e53186c\",\"reference_platform_multilingual.md\":\"102377a2\",\"reference_platform_reusability.md\":\"c87c65a7\",\"reference_platform_testing.md\":\"80221129\",\"reference_platform_versioncontrol.md\":\"c4fab407\",\"reference_plugins_components_datepicker_readme.md\":\"04fb2b7e\",\"reference_plugins_components_datepicker_datepicker-design.md\":\"a8bf3bcd\",\"reference_plugins_services_reservation_readme.md\":\"97b5644f\",\"reference_plugins_services_reservation_google-calendar-reservation.md\":\"db59194f\",\"reference_plugins_services_reservation_reservation-api.md\":\"5b352b68\",\"reference_providers_extension.md\":\"fb20498f\",\"reference_providers_googlesheets.md\":\"63c39027\",\"reference_providers_native.md\":\"a07c0894\",\"reference_providers_overview.md\":\"509b886d\",\"reference_providers_postgrest.md\":\"9e6ba8d7\",\"reference_support_chatwoot.md\":\"afb7080b\",\"reference_support_overview.md\":\"dd649770\",\"essentials_components.md\":\"0cdfe577\",\"reference_platform_access.md\":\"70cf3758\",\"guide_build-provider.md\":\"93064438\",\"articles_reuse-reservation-module.md\":\"bffbe0c2\",\"essentials_cooperative.md\":\"f496e8b5\",\"readme.md\":\"9b3cb2b5\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"OpenCUI\",\"description\":\"前端技术文档\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"/images/logo.png\",\"nav\":[{\"text\":\"Why OpenCUI\",\"link\":\"/essentials/README.md\",\"activeMatch\":\"/essentials/\"},{\"text\":\"Quickstart\",\"link\":\"/guide/\",\"activeMatch\":\"/guide/\"},{\"text\":\"Reference\",\"link\":\"/reference/annotations/overview.html\",\"activeMatch\":\"/reference/\"},{\"text\":\"Pricing\",\"link\":\"/pricing/README.md\",\"activeMatch\":\"/pricing/\"},{\"text\":\"Blog\",\"link\":\"/articles/\",\"activeMatch\":\"/articles/\"},{\"text\":\"Start to build\",\"link\":\"https://build.opencui.io\",\"target\":\"_blank\"}],\"sidebar\":{\"/essentials/\":[{\"text\":\"Why OpenCUI\",\"collapsed\":false,\"items\":[{\"text\":\"Cost-effective conversational experience\",\"link\":\"/essentials/README.md\"},{\"text\":\"Cooperative principle\",\"link\":\"/essentials/cooperative.md\"},{\"text\":\"5 levels of CUI\",\"link\":\"/essentials/5levels-cui.md\"},{\"text\":\"Open sourced runtime\",\"link\":\"/essentials/architecture.md\"}]}],\"/guide/\":[{\"text\":\"Quickstart\",\"items\":[{\"text\":\"Sign up\",\"link\":\"/guide/signingup\"},{\"text\":\"Clone a simple chatbot\",\"link\":\"/guide/clone-simple-chatbot.md\"},{\"text\":\"Build a simple chatbot\",\"link\":\"/guide/build-simple-chatbot.md\"},{\"text\":\"Reuse a simple module\",\"link\":\"/guide/reuse-component.md\"},{\"text\":\"Build a simple module\",\"link\":\"/guide/build-module.md\"},{\"text\":\"Build a simple provider\",\"link\":\"/guide/build-provider.md\"},{\"text\":\"Deploy a chatbot\",\"link\":\"/guide/deploy-to-channel.md\"},{\"text\":\"OpenCUI workflow\",\"link\":\"/guide/opencui-flow.md\"},{\"text\":\"Key concepts\",\"link\":\"/guide/concepts.md\"}]}],\"/reference/\":[{\"text\":\"Got team?\",\"link\":\"/reference/are-you-ready.md\"},{\"text\":\"Dialog Annotations\",\"collapsible\":true,\"items\":[{\"text\":\"Overview\",\"link\":\"/reference/annotations/overview.md\"},{\"text\":\"Fill strategy\",\"link\":\"/reference/annotations/fillstrategy.md\"},{\"text\":\"Initialization\",\"link\":\"/reference/annotations/init.md\"},{\"text\":\"Value recommendation\",\"link\":\"/reference/annotations/valuerec.md\"},{\"text\":\"Value check\",\"link\":\"/reference/annotations/valuecheck.md\"},{\"text\":\"Confirmation\",\"link\":\"/reference/annotations/confirmation.md\"},{\"text\":\"State transition\",\"link\":\"/reference/annotations/transition.md\"}]},{\"text\":\"Providers\",\"collapsible\":true,\"items\":[{\"text\":\"Overview\",\"link\":\"/reference/providers/overview.md\"},{\"text\":\"Native provider\",\"link\":\"/reference/providers/native.md\"},{\"text\":\"PostgreSQL provider\",\"link\":\"/reference/providers/postgrest.md\"}]},{\"text\":\"Channels\",\"collapsible\":true,\"items\":[{\"text\":\"Overview\",\"link\":\"/reference/channels/overview.md\"},{\"text\":\"Universal Channel\",\"link\":\"/reference/channels/universalmessage.md\"},{\"text\":\"Google Business Message\",\"link\":\"/reference/channels/googlebusiness.md\"},{\"text\":\"Messenger\",\"link\":\"/reference/channels/messenger.md\"},{\"text\":\"WhatsApp\",\"link\":\"/reference/channels/whatsapp.md\"}]},{\"text\":\"Supports\",\"collapsible\":true,\"items\":[{\"text\":\"Overview\",\"link\":\"/reference/support/overview.md\"},{\"text\":\"Chatwoot\",\"link\":\"/reference/support/Chatwoot.md\"}]},{\"text\":\"Extensions\",\"link\":\"/reference/providers/extension.md\"},{\"text\":\"CUI Components\",\"collapsible\":true,\"items\":[{\"text\":\"System CUI components\",\"link\":\"/reference/annotations/systemcomponent.md\"},{\"text\":\"Date picker\",\"link\":\"/reference/plugins/components/datepicker/README.md\",\"collapsible\":true,\"items\":[{\"text\":\"CUI design\",\"link\":\"/reference/plugins/components/datepicker/datepicker-design.md\"}]}]},{\"text\":\"Platform\",\"collapsible\":true,\"items\":[{\"text\":\"Multilingual\",\"link\":\"/reference/platform/multilingual.md\"},{\"text\":\"Testing\",\"link\":\"/reference/platform/testing.md\"},{\"text\":\"Deployment\",\"link\":\"/reference/platform/deployment.md\"},{\"text\":\"Version control\",\"link\":\"/reference/platform/versioncontrol.md\"},{\"text\":\"Access control\",\"link\":\"/reference/platform/access.md\"},{\"text\":\"Reusability\",\"link\":\"/reference/platform/reusability.md\"}]},{\"text\":\"Glossary\",\"link\":\"/reference/glossary.md\"}],\"/policy/\":[{\"text\":\"Terms of service\",\"link\":\"/policy/terms.md\"},{\"text\":\"Privacy policy\",\"link\":\"/policy/privacy.md\"}]}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>